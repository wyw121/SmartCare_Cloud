-- 设备管理表
CREATE TABLE IF NOT EXISTS equipment (
    id BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '设备ID',
    device_id VARCHAR(50) NOT NULL COMMENT '设备编号',
    device_name VARCHAR(100) NOT NULL COMMENT '设备名称',
    device_type VARCHAR(50) NOT NULL COMMENT '设备类型：BLOOD_PRESSURE,BLOOD_GLUCOSE,SMART_WATCH,THERMOMETER,ECG_MONITOR,WEIGHT_SCALE,LOCATOR,EMERGENCY_BUTTON,ENVIRONMENT_SENSOR',
    brand VARCHAR(50) COMMENT '设备品牌',
    model VARCHAR(100) COMMENT '设备型号',
    manufacturer VARCHAR(100) COMMENT '制造商',
    status VARCHAR(20) DEFAULT 'OFFLINE' COMMENT '设备状态：ONLINE,OFFLINE,FAULT,MAINTENANCE',
    location VARCHAR(200) COMMENT '设备位置',
    elderly_id BIGINT(20) COMMENT '绑定老人ID',
    serial_number VARCHAR(100) COMMENT '设备序列号',
    mac_address VARCHAR(50) COMMENT 'MAC地址',
    ip_address VARCHAR(50) COMMENT 'IP地址',
    protocol VARCHAR(20) COMMENT '通信协议：WIFI,BLUETOOTH,ZIGBEE,LORA,4G,5G',
    api_endpoint VARCHAR(500) COMMENT 'API接入地址',
    data_frequency INT DEFAULT 60 COMMENT '数据推送频率（秒）',
    battery_level INT COMMENT '电池电量百分比',
    firmware_version VARCHAR(50) COMMENT '固件版本',
    last_online_time DATETIME COMMENT '最后在线时间',
    last_data_time DATETIME COMMENT '最后数据上报时间',
    install_date DATETIME COMMENT '安装日期',
    warranty_expiry DATETIME COMMENT '保修到期日期',
    description TEXT COMMENT '设备描述',
    config_params JSON COMMENT '配置参数',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    is_deleted TINYINT(1) DEFAULT 0 COMMENT '是否删除',
    PRIMARY KEY (id),
    UNIQUE KEY uk_device_id (device_id),
    KEY idx_device_type (device_type),
    KEY idx_status (status),
    KEY idx_elderly_id (elderly_id),
    KEY idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='设备管理表';

-- 插入示例设备数据
INSERT INTO equipment (device_id, device_name, device_type, brand, model, manufacturer, status, location, elderly_id, serial_number, mac_address, protocol, data_frequency, battery_level, firmware_version, install_date, description) VALUES
('BP001', '智能血压计-001', 'BLOOD_PRESSURE', '欧姆龙', 'HEM-7136', '欧姆龙健康医疗(中国)有限公司', 'ONLINE', 'A栋101室', 1, 'BP20250708001', '00:1A:2B:3C:4D:5E', 'WIFI', 300, 85, 'v2.1.3', '2025-01-15 09:00:00', '用于监测老人血压的智能设备'),
('BG001', '血糖仪-001', 'BLOOD_GLUCOSE', '强生', 'OneTouch', '强生(中国)医疗器材有限公司', 'ONLINE', 'A栋101室', 1, 'BG20250708001', '00:1A:2B:3C:4D:5F', 'BLUETOOTH', 0, 92, 'v1.8.2', '2025-01-15 09:00:00', '用于监测老人血糖水平的设备'),
('SW001', '智能手环-001', 'SMART_WATCH', '小米', 'Mi Band 7', '小米科技有限责任公司', 'ONLINE', 'A栋101室', 1, 'SW20250708001', '00:1A:2B:3C:4D:60', 'BLUETOOTH', 60, 78, 'v3.2.1', '2025-01-15 09:00:00', '监测老人心率、步数、睡眠等数据'),
('TH001', '智能体温计-001', 'THERMOMETER', '鱼跃', 'YT-1', '江苏鱼跃医疗设备股份有限公司', 'ONLINE', 'A栋102室', 2, 'TH20250708001', '00:1A:2B:3C:4D:61', 'BLUETOOTH', 0, 88, 'v1.5.0', '2025-02-01 10:00:00', '用于测量老人体温的智能设备'),
('ECG001', '心电监护仪-001', 'ECG_MONITOR', '迈瑞', 'BeneHeart R3', '深圳迈瑞生物医疗电子股份有限公司', 'ONLINE', 'A栋103室', 3, 'ECG20250708001', '00:1A:2B:3C:4D:62', 'WIFI', 10, 95, 'v4.1.2', '2025-02-15 14:00:00', '监测老人心电图和生命体征'),
('WS001', '智能体重秤-001', 'WEIGHT_SCALE', '华为', 'AH100', '华为技术有限公司', 'ONLINE', 'A栋104室', 4, 'WS20250708001', '00:1A:2B:3C:4D:63', 'WIFI', 0, 90, 'v2.3.1', '2025-03-01 08:00:00', '测量老人体重、BMI等身体指标'),
('LOC001', '定位器-001', 'LOCATOR', '360', '360儿童卫士', '北京奇虎科技有限公司', 'ONLINE', '随身携带', 5, 'LOC20250708001', '00:1A:2B:3C:4D:64', '4G', 300, 65, 'v1.9.8', '2025-03-15 16:00:00', '追踪老人位置，防止走失'),
('EB001', '紧急呼叫器-001', 'EMERGENCY_BUTTON', '康佳', 'KK-SOS', '康佳集团股份有限公司', 'ONLINE', '随身携带', 6, 'EB20250708001', '00:1A:2B:3C:4D:65', '4G', 0, 72, 'v1.2.5', '2025-04-01 12:00:00', '老人紧急求助设备'),
('ENV001', '环境监测器-001', 'ENVIRONMENT_SENSOR', '海尔', 'HE-ENV100', '海尔智家股份有限公司', 'ONLINE', 'A栋大厅', NULL, 'ENV20250708001', '00:1A:2B:3C:4D:66', 'WIFI', 600, 100, 'v2.0.1', '2025-04-15 10:00:00', '监测室内温湿度、空气质量等环境数据'),
('BP002', '智能血压计-002', 'BLOOD_PRESSURE', '欧姆龙', 'HEM-7136', '欧姆龙健康医疗(中国)有限公司', 'OFFLINE', 'B栋201室', 7, 'BP20250708002', '00:1A:2B:3C:4D:67', 'WIFI', 300, 0, 'v2.1.3', '2025-05-01 09:00:00', '用于监测老人血压的智能设备'),
('BG002', '血糖仪-002', 'BLOOD_GLUCOSE', '强生', 'OneTouch', '强生(中国)医疗器材有限公司', 'FAULT', 'B栋202室', 8, 'BG20250708002', '00:1A:2B:3C:4D:68', 'BLUETOOTH', 0, 15, 'v1.8.2', '2025-05-15 14:00:00', '用于监测老人血糖水平的设备'),
('SW002', '智能手环-002', 'SMART_WATCH', '华为', 'HUAWEI WATCH GT', '华为技术有限公司', 'MAINTENANCE', 'B栋203室', 9, 'SW20250708002', '00:1A:2B:3C:4D:69', 'BLUETOOTH', 60, 45, 'v2.8.5', '2025-06-01 11:00:00', '监测老人心率、步数、睡眠等数据');
