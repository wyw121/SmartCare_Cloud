# æ³¨å†ŒåŠŸèƒ½ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°
ç”¨æˆ·åœ¨æ³¨å†Œé¡µé¢æäº¤æ³¨å†Œä¿¡æ¯æ—¶é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
- `Failed to load resource: the server responded with a status of 400 ()`
- `æ³¨å†Œå¤±è´¥: AxiosError`
- æç¤ºï¼š`æäº¤æ³¨å†Œä¿¡æ¯å¤±è´¥`

## é—®é¢˜åˆ†æ

### 1. åç«¯æœåŠ¡æœªå¯åŠ¨
**é—®é¢˜ï¼š** ç«¯å£8080è¢«å ç”¨ï¼Œå¯¼è‡´åç«¯æœåŠ¡æ— æ³•å¯åŠ¨
**ç°è±¡ï¼š** 
- Mavenæ„å»ºå¤±è´¥ï¼Œæç¤º"Port 8080 is already in use"
- å‰ç«¯APIè¯·æ±‚æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡

### 2. å‰ç«¯æ•°æ®æ ¼å¼ä¸åŒ¹é…
**é—®é¢˜ï¼š** å‰ç«¯æäº¤çš„å­—æ®µåä¸åç«¯DTOæœŸæœ›çš„å­—æ®µåä¸åŒ¹é…
**ç°è±¡ï¼š** 
- å‰ç«¯ä½¿ç”¨ `realName: registerForm.name` 
- åç«¯DTOæœŸæœ›çš„å­—æ®µåå°±æ˜¯ `realName`
- ç¼ºå°‘ `confirmPassword` å­—æ®µ

### 3. é”™è¯¯å¤„ç†ä¸å®Œå–„
**é—®é¢˜ï¼š** å‰ç«¯é”™è¯¯å¤„ç†è¿‡äºç®€å•ï¼Œæ— æ³•ä¸ºç”¨æˆ·æä¾›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯
**ç°è±¡ï¼š** 
- åªæ˜¾ç¤ºé€šç”¨é”™è¯¯ä¿¡æ¯
- æ— æ³•åŒºåˆ†ç½‘ç»œé”™è¯¯ã€å‚æ•°é”™è¯¯ã€æœåŠ¡å™¨é”™è¯¯ç­‰

## ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤åç«¯æœåŠ¡å¯åŠ¨é—®é¢˜
```bash
# 1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8080

# 2. æ€æ‰å ç”¨è¿›ç¨‹
taskkill /PID 44368 /F

# 3. é‡æ–°å¯åŠ¨åç«¯æœåŠ¡
cd c:\å¼€å‘\SmartCare_Cloud\backend && mvn spring-boot:run
```

**ç»“æœï¼š** åç«¯æœåŠ¡æˆåŠŸå¯åŠ¨ï¼Œå¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸å“åº”

### 2. ä¿®å¤å‰ç«¯æ•°æ®æ ¼å¼
**æ–‡ä»¶ï¼š** `src/views/register/index.vue`

```javascript
// ä¿®å¤å‰çš„ä»£ç 
const registerData = {
  username: registerForm.username,
  password: registerForm.password,
  realName: registerForm.name,  // å­—æ®µåä¸åŒ¹é…
  // ç¼ºå°‘ confirmPassword å­—æ®µ
  // ...
}

// ä¿®å¤åçš„ä»£ç 
const registerData = {
  username: registerForm.username,
  password: registerForm.password,
  confirmPassword: registerForm.confirmPassword, // æ·»åŠ ç¡®è®¤å¯†ç å­—æ®µ
  realName: registerForm.name, // ä¿®å¤ï¼šåç«¯æœŸæœ›çš„å­—æ®µåæ˜¯realName
  gender: registerForm.gender,
  phone: registerForm.phone,
  email: registerForm.email,
  department: registerForm.department,
  roleCode: registerForm.roleCode,
  description: registerForm.description
}
```

### 3. å¢å¼ºé”™è¯¯å¤„ç†
```javascript
// ä¿®å¤å‰çš„é”™è¯¯å¤„ç†
catch (error) {
  console.error('æ³¨å†Œå¤±è´¥:', error)
  ElMessage.error(error.message || 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•')
}

// ä¿®å¤åçš„é”™è¯¯å¤„ç†
catch (error) {
  console.error('æ³¨å†Œå¤±è´¥:', error)
  
  // è¯¦ç»†çš„é”™è¯¯å¤„ç†
  let errorMessage = 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•'
  
  if (error.response) {
    // æœåŠ¡å™¨å“åº”é”™è¯¯
    const status = error.response.status
    const data = error.response.data
    
    if (status === 400) {
      errorMessage = data.message || 'è¯·æ±‚å‚æ•°é”™è¯¯ï¼Œè¯·æ£€æŸ¥è¾“å…¥ä¿¡æ¯'
    } else if (status === 500) {
      errorMessage = 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜'
    } else {
      errorMessage = data.message || `æœåŠ¡å™¨é”™è¯¯ (${status})`
    }
  } else if (error.request) {
    // ç½‘ç»œé”™è¯¯
    errorMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®'
  } else {
    // å…¶ä»–é”™è¯¯
    errorMessage = error.message || 'æœªçŸ¥é”™è¯¯'
  }
  
  ElMessage.error(errorMessage)
}
```

## æµ‹è¯•éªŒè¯

### 1. åç«¯æœåŠ¡æµ‹è¯•
```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl -X GET http://localhost:8080/api/auth/health

# æœŸæœ›å“åº”
{
  "code": 200,
  "message": "å¥åº·æ£€æŸ¥é€šè¿‡",
  "data": "æœåŠ¡æ­£å¸¸è¿è¡Œ",
  "timestamp": 1751716716274
}
```

### 2. æ³¨å†ŒAPIæµ‹è¯•
åˆ›å»ºäº†ä¸“é—¨çš„æµ‹è¯•é¡µé¢ï¼š`public/register-api-test.html`
- æä¾›å¯è§†åŒ–çš„APIæµ‹è¯•ç•Œé¢
- æ”¯æŒä¸åŒè§’è‰²çš„æ³¨å†Œæµ‹è¯•
- åŒ…å«ç½‘ç»œè¯Šæ–­åŠŸèƒ½

### 3. å‰ç«¯æ³¨å†ŒåŠŸèƒ½æµ‹è¯•
1. è®¿é—®æ³¨å†Œé¡µé¢ï¼š`http://localhost:3001/register`
2. å¡«å†™æ³¨å†Œä¿¡æ¯
3. æäº¤æ³¨å†Œ
4. éªŒè¯æ˜¯å¦æˆåŠŸæ³¨å†Œå¹¶è·³è½¬åˆ°ç™»å½•é¡µ

## æŠ€æœ¯ç»†èŠ‚

### åç«¯DTOéªŒè¯
```java
@Schema(description = "çœŸå®å§“å", required = true)
@NotBlank(message = "çœŸå®å§“åä¸èƒ½ä¸ºç©º")
@Size(max = 50, message = "å§“åé•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦")
private String realName;

@Schema(description = "ç¡®è®¤å¯†ç ", required = true)
@NotBlank(message = "ç¡®è®¤å¯†ç ä¸èƒ½ä¸ºç©º")
private String confirmPassword;
```

### å‰ç«¯APIé…ç½®
```javascript
// APIåŸºç¡€é…ç½®
const service = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/api',
  timeout: 15000,
  headers: {
    'Content-Type': 'application/json;charset=UTF-8'
  }
})

// æ³¨å†ŒAPI
export const auth = {
  register(data) {
    return request({
      url: '/auth/register',
      method: 'post',
      data
    })
  }
}
```

## ä¿®å¤ç»“æœ

### âœ… é—®é¢˜å·²è§£å†³
1. **åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ** - ç«¯å£8080ç°åœ¨å¯ç”¨ï¼ŒæœåŠ¡å¯åŠ¨æˆåŠŸ
2. **æ•°æ®æ ¼å¼åŒ¹é…** - å‰ç«¯æäº¤çš„æ•°æ®æ ¼å¼ä¸åç«¯DTOå®Œå…¨åŒ¹é…
3. **é”™è¯¯å¤„ç†å®Œå–„** - ç”¨æˆ·ç°åœ¨å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
4. **APIè¿æ¥æ­£å¸¸** - å‰åç«¯é€šä¿¡æ­£å¸¸

### ğŸ§ª æµ‹è¯•å·¥å…·
- **æµ‹è¯•é¡µé¢ï¼š** `http://localhost:3001/register-api-test.html`
- **åŠŸèƒ½æµ‹è¯•ï¼š** æ”¯æŒå¥åº·æ£€æŸ¥ã€æ³¨å†ŒAPIæµ‹è¯•ã€ç½‘ç»œè¯Šæ–­
- **æ•°æ®éªŒè¯ï¼š** è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ŒéªŒè¯ä¸åŒè§’è‰²æ³¨å†Œ

### ğŸ“‹ åç»­å»ºè®®
1. **å®Œå–„éªŒè¯é€»è¾‘** - æ·»åŠ ç”¨æˆ·åã€æ‰‹æœºå·ã€é‚®ç®±çš„é‡å¤æ£€æŸ¥
2. **å¢åŠ éªŒè¯ç ** - å®ç°å›¾å½¢éªŒè¯ç æˆ–çŸ­ä¿¡éªŒè¯ç 
3. **å®Œå–„æ—¥å¿—è®°å½•** - æ·»åŠ æ›´è¯¦ç»†çš„æœåŠ¡å™¨ç«¯æ—¥å¿—
4. **æ·»åŠ å•å…ƒæµ‹è¯•** - ä¸ºæ³¨å†ŒåŠŸèƒ½ç¼–å†™å®Œæ•´çš„å•å…ƒæµ‹è¯•

---

**ä¿®å¤æ—¶é—´ï¼š** 2025å¹´7æœˆ5æ—¥  
**ä¿®å¤äººå‘˜ï¼š** GitHub Copilot  
**æµ‹è¯•çŠ¶æ€ï¼š** âœ… é€šè¿‡  
**éƒ¨ç½²çŠ¶æ€ï¼š** å¯ä»¥éƒ¨ç½²

## ä½¿ç”¨è¯´æ˜

1. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd c:\å¼€å‘\SmartCare_Cloud\backend
   mvn spring-boot:run
   ```

2. **å¯åŠ¨å‰ç«¯æœåŠ¡**
   ```bash
   cd c:\å¼€å‘\SmartCare_Cloud\frontend
   npm run dev
   ```

3. **æµ‹è¯•æ³¨å†ŒåŠŸèƒ½**
   - è®¿é—®ï¼š`http://localhost:3001/register`
   - æˆ–ä½¿ç”¨æµ‹è¯•å·¥å…·ï¼š`http://localhost:3001/register-api-test.html`

æ³¨å†ŒåŠŸèƒ½ç°åœ¨å·²ç»å®Œå…¨ä¿®å¤ï¼Œç”¨æˆ·å¯ä»¥æ­£å¸¸æ³¨å†Œè´¦å·äº†ï¼
