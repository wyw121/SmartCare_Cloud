# 智慧医养平台前端开发指南

## 项目概述

智慧医养大数据公共服务平台是一个面向老年人医疗和养老服务的云端后台管理系统，采用医养结合的服务模式。本项目采用模块化架构，确保代码的高内聚低耦合，便于维护和扩展。

## 技术栈

- **Vue 3** - 前端框架，使用 Composition API
- **Element Plus** - UI组件库
- **Vite** - 构建工具
- **Vue Router** - 路由管理
- **Pinia** - 状态管理
- **Axios** - HTTP请求
- **ECharts** - 图表库
- **SCSS** - CSS预处理器

## 目录结构

```
src/
├── api/                    # API接口
│   ├── index.js           # 统一导出
│   ├── dashboard.js       # 仪表板相关
│   ├── elderly.js         # 老人管理相关
│   ├── doctor.js          # 医生管理相关
│   ├── healthWarning.js   # 健康预警相关
│   ├── system.js          # 系统管理相关
│   └── reports.js         # 报表分析相关
├── assets/                 # 静态资源
├── components/             # 组件
│   ├── common/            # 通用组件
│   ├── dashboard/         # 仪表板组件
│   ├── elderly/           # 老人管理组件
│   ├── doctor/            # 医生管理组件
│   ├── health-warning/    # 健康预警组件
│   ├── system/            # 系统管理组件
│   └── reports/           # 报表分析组件
├── layout/                 # 布局组件
├── router/                 # 路由配置
├── store/                  # 状态管理
├── styles/                 # 样式文件
├── utils/                  # 工具函数
└── views/                  # 页面组件
    ├── dashboard/         # 仪表板页面
    ├── elderly/           # 老人管理页面
    ├── doctor/            # 医生管理页面
    ├── health-warning/    # 健康预警页面
    ├── system/            # 系统管理页面
    └── reports/           # 报表分析页面
```

## 组件开发规范

### 1. 组件命名

- **PascalCase** 用于组件文件名和组件名
- 组件文件名应该清晰表达组件功能
- 避免缩写，使用完整单词

```javascript
// ✅ 正确
components/
├── UserSearchSection.vue
├── DataTableSection.vue
└── ChartContainer.vue

// ❌ 错误
components/
├── usrSrch.vue
├── dtTbl.vue
└── chart.vue
```

### 2. 组件结构

每个组件应遵循统一的结构：

```vue
<template>
  <div class="component-container">
    <!-- 组件内容 -->
  </div>
</template>

<script setup>
// 导入
import { ref, reactive, onMounted } from 'vue'

// Props定义
const props = defineProps({
  // props定义
})

// Events定义
const emit = defineEmits(['event-name'])

// 响应式数据
const loading = ref(false)

// 计算属性
const computedValue = computed(() => {
  // 计算逻辑
})

// 方法
const handleMethod = () => {
  // 方法逻辑
}

// 生命周期
onMounted(() => {
  // 初始化逻辑
})
</script>

<style scoped>
.component-container {
  /* 样式 */
}
</style>
```

### 3. Props规范

- 使用 `defineProps` 定义 props
- 提供类型检查和默认值
- 添加必要的验证

```javascript
const props = defineProps({
  title: {
    type: String,
    required: true
  },
  data: {
    type: Array,
    default: () => []
  },
  loading: {
    type: Boolean,
    default: false
  }
})
```

### 4. Events规范

- 使用 `defineEmits` 定义事件
- 事件名使用 kebab-case
- 提供清晰的事件参数

```javascript
const emit = defineEmits(['search', 'reset', 'page-change'])

const handleSearch = (params) => {
  emit('search', params)
}
```

## 通用组件使用指南

### 1. PageHeader 页面头部

```vue
<template>
  <PageHeader 
    title="页面标题"
    subtitle="页面描述信息"
  />
</template>

<script setup>
import PageHeader from '@/components/common/PageHeader.vue'
</script>
```

### 2. DataTable 数据表格

```vue
<template>
  <DataTable
    :data="tableData"
    :columns="columns"
    :loading="loading"
    :pagination="pagination"
    @page-change="handlePageChange"
  />
</template>

<script setup>
import DataTable from '@/components/common/DataTable.vue'

const columns = [
  { prop: 'name', label: '姓名', width: '120' },
  { prop: 'age', label: '年龄', width: '80' }
]
</script>
```

### 3. SearchForm 搜索表单

```vue
<template>
  <SearchForm
    :fields="searchFields"
    @search="handleSearch"
    @reset="handleReset"
  />
</template>

<script setup>
import SearchForm from '@/components/common/SearchForm.vue'

const searchFields = [
  {
    type: 'input',
    prop: 'name',
    label: '姓名',
    placeholder: '请输入姓名'
  }
]
</script>
```

## 页面开发流程

### 1. 创建页面结构

1. 在 `views/` 对应目录下创建页面文件
2. 创建对应的组件目录结构
3. 配置路由

### 2. 拆分页面组件

1. 识别页面功能模块
2. 创建对应的子组件
3. 确保每个组件职责单一

### 3. 组件通信

- 父子组件：使用 props 和 events
- 兄弟组件：通过父组件中转
- 跨级组件：使用 provide/inject 或状态管理

### 4. 状态管理

```javascript
// store/modules/user.js
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: {},
    token: ''
  }),
  
  actions: {
    setUserInfo(info) {
      this.userInfo = info
    }
  }
})
```

## API接口规范

### 1. 接口文件组织

```javascript
// api/user.js
import request from '@/utils/request'

/**
 * 获取用户列表
 * @param {Object} params - 查询参数
 */
export function getUserList(params) {
  return request({
    url: '/api/users',
    method: 'get',
    params
  })
}

/**
 * 创建用户
 * @param {Object} data - 用户数据
 */
export function createUser(data) {
  return request({
    url: '/api/users',
    method: 'post',
    data
  })
}
```

### 2. 接口调用

```javascript
// 在组件中使用
import { getUserList } from '@/api/user'

const fetchData = async () => {
  try {
    loading.value = true
    const response = await getUserList(searchParams)
    userList.value = response.data.records
  } catch (error) {
    ElMessage.error('获取数据失败')
  } finally {
    loading.value = false
  }
}
```

## 样式规范

### 1. 作用域样式

```vue
<style scoped>
.component-container {
  padding: 20px;
}

/* 深度选择器 */
.component-container :deep(.el-button) {
  margin-left: 10px;
}
</style>
```

### 2. 全局样式

```scss
// styles/common.scss
.page-container {
  padding: 20px;
  background-color: #f5f5f5;
  min-height: 100vh;
}

.search-form {
  margin-bottom: 20px;
}
```

### 3. 响应式设计

```scss
.responsive-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}
```

## 错误处理

### 1. 接口错误处理

```javascript
import { ElMessage } from 'element-plus'

const handleRequest = async () => {
  try {
    const response = await apiCall()
    // 处理成功响应
  } catch (error) {
    if (error.response?.status === 401) {
      // 处理认证错误
      router.push('/login')
    } else {
      ElMessage.error(error.message || '操作失败')
    }
  }
}
```

### 2. 表单验证

```javascript
const formRules = {
  name: [
    { required: true, message: '请输入姓名', trigger: 'blur' }
  ],
  email: [
    { required: true, message: '请输入邮箱', trigger: 'blur' },
    { type: 'email', message: '邮箱格式不正确', trigger: 'blur' }
  ]
}
```

## 性能优化

### 1. 组件懒加载

```javascript
// 路由懒加载
const routes = [
  {
    path: '/dashboard',
    component: () => import('@/views/dashboard/index.vue')
  }
]
```

### 2. 计算属性缓存

```javascript
const expensiveValue = computed(() => {
  // 只有依赖项变化时才重新计算
  return heavyCalculation(props.data)
})
```

### 3. 防抖处理

```javascript
import { debounce } from 'lodash-es'

const handleSearch = debounce((value) => {
  // 搜索逻辑
}, 300)
```

## 测试规范

### 1. 单元测试

```javascript
// tests/components/UserList.spec.js
import { mount } from '@vue/test-utils'
import UserList from '@/components/UserList.vue'

describe('UserList', () => {
  it('renders user list correctly', () => {
    const wrapper = mount(UserList, {
      props: {
        users: [{ id: 1, name: 'Test User' }]
      }
    })
    
    expect(wrapper.find('.user-item').exists()).toBe(true)
  })
})
```

## 部署说明

### 1. 开发环境

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 2. 生产构建

```bash
# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 常见问题

### 1. 组件样式冲突
- 使用 `scoped` 属性隔离样式
- 避免使用全局样式修改组件库默认样式

### 2. 组件通信复杂
- 合理使用 props/events
- 考虑使用状态管理
- 避免过深的组件嵌套

### 3. 性能问题
- 合理使用 v-show/v-if
- 避免在模板中使用复杂计算
- 使用计算属性缓存结果

## 最佳实践

1. **保持组件简单** - 每个组件只做一件事
2. **合理抽象** - 提取可复用的逻辑
3. **注释文档** - 为复杂逻辑添加注释
4. **错误处理** - 优雅处理各种异常情况
5. **用户体验** - 添加加载状态和反馈信息
6. **代码审查** - 确保代码质量和一致性

## 联系方式

如有问题或建议，请联系开发团队。
