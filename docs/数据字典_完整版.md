# 智慧医养平台 - 完整数据字典

## 📋 目录
- [1. 用户与权限管理](#1-用户与权限管理)
- [2. 老人档案管理](#2-老人档案管理)
- [3. 医护人员管理](#3-医护人员管理)
- [4. 健康管理](#4-健康管理)
- [5. 护理与服务](#5-护理与服务)
- [6. 设备管理](#6-设备管理)
- [7. 系统日志](#7-系统日志)

---

## 1. 用户与权限管理

### 1.1 系统用户表 (`sys_user`)

**表说明:** 存储所有系统用户的基础信息

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 用户ID |
| username | VARCHAR | 50 | ✓ | UNIQUE | - | 登录用户名 |
| password | VARCHAR | 255 | ✓ | - | - | 密码(BCrypt加密) |
| real_name | VARCHAR | 50 | ✓ | INDEX | - | 真实姓名 |
| role_code | VARCHAR | 50 | ✓ | INDEX | admin | 角色编码 |
| organization_id | BIGINT | - | - | INDEX | - | 所属机构ID |
| avatar | VARCHAR | 200 | - | - | - | 头像URL |
| status | TINYINT | - | ✓ | INDEX | 1 | 状态: 1-启用, 0-禁用 |
| created_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| updated_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |

**角色编码枚举值:**
- `system_admin` - 系统管理员
- `business_admin` - 业务管理员
- `doctor` - 医生
- `nurse` - 护工
- `social_worker` - 社工
- `family` - 家属

**说明:**
- 详细的用户信息(电话、邮箱、性别等)存储在对应的专业人员表中:
  - 医生信息 → `t_doctor` 表
  - 护工信息 → `nurse_info` 表
  - 社工信息 → `social_worker_info` 表
  - 家属信息 → `family_user` 表

---

### 1.2 角色表 (`sys_role`)

**表说明:** 角色定义表

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 角色ID |
| role_code | VARCHAR | 20 | ✓ | UNIQUE | - | 角色编码 |
| role_name | VARCHAR | 50 | ✓ | - | - | 角色名称 |
| role_desc | VARCHAR | 200 | - | - | - | 角色描述 |
| data_scope | VARCHAR | 20 | - | - | all | 数据范围: all-全部, org-本机构, dept-本部门, self-仅本人 |
| status | TINYINT | - | - | - | 1 | 状态: 1-启用, 0-禁用 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

---

### 1.3 权限表 (`sys_permission`)

**表说明:** 系统权限定义表

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 权限ID |
| permission_code | VARCHAR | 50 | ✓ | UNIQUE | - | 权限编码 |
| permission_name | VARCHAR | 50 | ✓ | - | - | 权限名称 |
| permission_type | VARCHAR | 20 | - | - | - | 权限类型: menu-菜单, button-按钮, api-接口 |
| parent_id | BIGINT | - | - | INDEX | - | 父权限ID |
| resource_path | VARCHAR | 200 | - | - | - | 资源路径 |
| method | VARCHAR | 10 | - | - | - | HTTP方法 |
| sort_order | INT | - | - | - | 0 | 排序号 |
| status | TINYINT | - | - | - | 1 | 状态 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |

---

### 1.4 角色-权限关联表 (`sys_role_permission`)

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 关联ID |
| role_id | BIGINT | - | ✓ | INDEX | - | 角色ID |
| permission_id | BIGINT | - | ✓ | INDEX | - | 权限ID |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |

---

### 1.5 家属用户表 (`family_user`)

**表说明:** 家属用户基础信息表(关联系统用户)

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 家属ID |
| sys_user_id | BIGINT | - | ✓ | UNIQUE | - | 关联系统用户ID |
| real_name | VARCHAR | 50 | ✓ | INDEX | - | 真实姓名 |
| gender | TINYINT | - | - | - | 1 | 性别: 1-男, 0-女 |
| phone | VARCHAR | 20 | - | INDEX | - | 联系电话 |
| email | VARCHAR | 100 | - | - | - | 电子邮箱 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 1-启用, 0-禁用 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记: 0-未删除, 1-已删除 |
| create_time | DATETIME | - | - | INDEX | NOW() | 创建时间 |
| update_time | DATETIME | - | - | - | NOW() | 更新时间 |
| create_by | BIGINT | - | - | - | - | 创建人ID |
| update_by | BIGINT | - | - | - | - | 更新人ID |

**说明:**
- 与老人的关系通过其他关联表管理(如 `family_elderly_relation`)
- `sys_user_id` 关联到 `sys_user.id`,实现账号登录功能

---

## 2. 老人档案管理

### 2.1 老人档案表 (`elderly`)

**表说明:** 老人基础信息和档案管理

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 老人ID |
| organization_id | BIGINT | - | ✓ | INDEX | - | 所属机构ID |
| name | VARCHAR | 50 | ✓ | INDEX | - | 姓名 |
| id_card | VARCHAR | 18 | - | UNIQUE | - | 身份证号 |
| phone | VARCHAR | 20 | - | - | - | 联系电话 |
| gender | TINYINT | - | ✓ | - | - | 性别: 1-男, 0-女 |
| birth_date | DATE | - | ✓ | - | - | 出生日期 |
| age | INT | - | - | - | - | 年龄(计算字段) |
| address | VARCHAR | 200 | - | - | - | 家庭住址 |
| room_number | VARCHAR | 20 | - | INDEX | - | 房间号 |
| admission_date | DATE | - | - | INDEX | - | 入住日期 |
| admission_type | VARCHAR | 20 | - | - | - | 入住类型: long_term-长期, short_term-短期, respite-临时 |
| health_status | VARCHAR | 50 | - | INDEX | - | 健康状态: good-良好, fair-一般, poor-较差, critical-危重 |
| care_level | TINYINT | - | - | INDEX | - | 照护等级: 1-自理, 2-半自理, 3-不能自理 |
| disability_level | TINYINT | - | - | - | - | 失能等级: 1-自理, 2-轻度, 3-中度, 4-重度 |
| mental_status | VARCHAR | 50 | - | - | - | 精神状态 |
| guardian_name | VARCHAR | 50 | - | - | - | 监护人姓名 |
| guardian_phone | VARCHAR | 20 | - | - | - | 监护人电话 |
| emergency_contact | VARCHAR | 50 | - | - | - | 紧急联系人 |
| emergency_phone | VARCHAR | 20 | - | - | - | 紧急联系人电话 |
| family_medical_history | TEXT | - | - | - | - | 家族病史 |
| allergy_history | TEXT | - | - | - | - | 过敏史 |
| chronic_diseases | JSON | - | - | - | - | 慢性病列表 |
| payment_method | VARCHAR | 50 | - | - | - | 支付方式: self-自费, insurance-医保, government-政府补贴 |
| responsible_doctor_id | BIGINT | - | - | INDEX | - | 责任医生ID |
| responsible_nurse_id | BIGINT | - | - | INDEX | - | 责任护工ID |
| responsible_social_worker_id | BIGINT | - | - | INDEX | - | 责任社工ID |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-已离院, 1-在院, 2-请假 |
| create_time | DATETIME | - | ✓ | INDEX | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| create_by | BIGINT | - | - | - | - | 创建者ID |
| update_by | BIGINT | - | - | - | - | 更新者ID |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

**慢性病JSON格式示例:**
```json
[
  {
    "disease_name": "高血压",
    "diagnosis_date": "2020-03-15",
    "severity": "中度",
    "medication": "降压药"
  }
]
```

---

### 2.2 家属-老人关联表 (`family_elderly_relation`)

**表说明:** 家属与老人的绑定关系,控制家属访问权限

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 关联ID |
| family_id | BIGINT | - | ✓ | INDEX | - | 家属用户ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| relationship | VARCHAR | 20 | ✓ | - | - | 关系类型: 儿子、女儿、儿媳、女婿、孙子、孙女等 |
| access_level | VARCHAR | 20 | - | - | basic | 访问权限级别 |
| is_primary_contact | TINYINT | - | - | - | 0 | 是否主要联系人: 0-否, 1-是 |
| status | TINYINT | - | - | INDEX | 1 | 关联状态: 0-无效, 1-有效 |
| start_date | DATETIME | - | - | - | NOW() | 关联开始时间 |
| end_date | DATETIME | - | - | - | - | 关联结束时间 |
| remark | VARCHAR | 500 | - | - | - | 备注 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| create_by | BIGINT | - | - | - | - | 创建者ID |
| update_by | BIGINT | - | - | - | - | 更新者ID |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

**访问级别说明:**
- `basic` - 基础信息: 姓名、年龄、房间号、入住日期
- `health` - 健康概要: 基础信息 + 健康状态、预警摘要
- `full` - 完整信息: 所有信息(详细健康记录、用药记录等)

---

## 3. 医护人员管理

### 3.1 医生信息表 (`t_doctor`)

**表说明:** 医生详细信息

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 医生ID |
| user_id | BIGINT | - | ✓ | UNIQUE | - | 关联系统用户ID |
| organization_id | BIGINT | - | ✓ | INDEX | - | 所属机构ID |
| employee_number | VARCHAR | 50 | ✓ | UNIQUE | - | 工号 |
| name | VARCHAR | 50 | ✓ | INDEX | - | 姓名 |
| gender | VARCHAR | 10 | - | - | - | 性别 |
| age | INT | - | - | - | - | 年龄 |
| phone | VARCHAR | 20 | - | - | - | 联系电话 |
| email | VARCHAR | 100 | - | - | - | 邮箱 |
| department | VARCHAR | 50 | - | INDEX | - | 科室 |
| title | VARCHAR | 50 | - | - | - | 职称: 主任医师、副主任医师、主治医师、医师 |
| specialization | VARCHAR | 200 | - | - | - | 专业特长 |
| experience_years | INT | - | - | - | - | 从业年限 |
| license_number | VARCHAR | 50 | - | - | - | 执业证书号 |
| qualification | VARCHAR | 100 | - | - | - | 学历/资质 |
| work_schedule | JSON | - | - | - | - | 排班信息 |
| service_scope | VARCHAR | 200 | - | - | - | 服务范围 |
| max_patients | INT | - | - | - | 50 | 最大负责老人数 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-离职, 1-在职, 2-休假 |
| entry_date | DATE | - | - | - | - | 入职日期 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

**排班信息JSON格式:**
```json
[
  {
    "day_of_week": 1,
    "start_time": "08:00",
    "end_time": "17:00",
    "location": "门诊三楼"
  }
]
```

---

### 3.2 医生-老人关联表 (`doctor_elderly_relation`)

**表说明:** 医生与老人的责任关系

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 关联ID |
| doctor_id | BIGINT | - | ✓ | INDEX | - | 医生ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| relationship_type | VARCHAR | 20 | ✓ | - | primary | 关系类型 |
| start_date | DATE | ✓ | - | - | - | 开始负责日期 |
| end_date | DATE | - | - | - | - | 结束负责日期 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-无效, 1-有效 |
| remark | VARCHAR | 500 | - | - | - | 备注 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| create_by | BIGINT | - | - | - | - | 创建者ID |
| update_by | BIGINT | - | - | - | - | 更新者ID |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

**关系类型说明:**
- `primary` - 主治医生 (主要负责人)
- `assistant` - 协助医生 (辅助诊疗)
- `consultant` - 会诊医生 (临时会诊)

---

### 3.3 护工信息表 (`nurse_info`)

**表说明:** 护工基础信息

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 护工ID |
| user_id | BIGINT | - | ✓ | UNIQUE | - | 关联系统用户ID |
| organization_id | BIGINT | - | ✓ | INDEX | - | 所属机构ID |
| employee_number | VARCHAR | 50 | ✓ | UNIQUE | - | 工号 |
| name | VARCHAR | 50 | ✓ | INDEX | - | 姓名 |
| gender | TINYINT | - | - | - | - | 性别: 1-男, 0-女 |
| phone | VARCHAR | 20 | - | - | - | 联系电话 |
| id_card | VARCHAR | 18 | - | - | - | 身份证号 |
| entry_date | DATE | - | - | - | - | 入职日期 |
| certificate_type | VARCHAR | 50 | - | - | - | 证书类型 |
| certificate_number | VARCHAR | 50 | - | - | - | 证书编号 |
| work_area | VARCHAR | 100 | - | INDEX | - | 工作区域 |
| max_care_count | INT | - | - | - | 5 | 最大照护人数 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-离职, 1-在职, 2-休假 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

---

### 3.4 护工-老人关联表 (`nurse_elderly_relation`)

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 关联ID |
| nurse_id | BIGINT | - | ✓ | INDEX | - | 护工ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| care_level | TINYINT | - | - | - | - | 照护等级: 1-一级, 2-二级, 3-三级 |
| start_date | DATE | ✓ | - | - | - | 开始照护日期 |
| end_date | DATE | - | - | - | - | 结束照护日期 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-无效, 1-有效 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

---

### 3.5 社工信息表 (`social_worker_info`)

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 社工ID |
| user_id | BIGINT | - | ✓ | UNIQUE | - | 关联系统用户ID |
| organization_id | BIGINT | - | ✓ | INDEX | - | 所属机构ID |
| employee_number | VARCHAR | 50 | ✓ | UNIQUE | - | 工号 |
| name | VARCHAR | 50 | ✓ | - | - | 姓名 |
| gender | TINYINT | - | - | - | - | 性别 |
| phone | VARCHAR | 20 | - | - | - | 联系电话 |
| specialization | VARCHAR | 100 | - | - | - | 专业领域 |
| certificate_type | VARCHAR | 50 | - | - | - | 证书类型 |
| status | TINYINT | - | - | INDEX | 1 | 状态 |
| entry_date | DATE | - | - | - | - | 入职日期 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

---

## 4. 健康管理

### 4.1 健康记录表 (`health_record`)

**表说明:** 老人健康数据记录

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 记录ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| record_date | DATE | - | ✓ | INDEX | - | 记录日期 |
| record_time | TIME | - | - | - | - | 记录时间 |
| record_type | VARCHAR | 50 | - | INDEX | - | 记录类型: vital_signs-体征, lab_test-检验, exam-检查 |
| blood_pressure_high | INT | - | - | - | - | 收缩压(mmHg) |
| blood_pressure_low | INT | - | - | - | - | 舒张压(mmHg) |
| heart_rate | INT | - | - | - | - | 心率(次/分) |
| temperature | DECIMAL | 4,1 | - | - | - | 体温(℃) |
| blood_sugar | DECIMAL | 5,2 | - | - | - | 血糖(mmol/L) |
| blood_oxygen | INT | - | - | - | - | 血氧饱和度(%) |
| weight | DECIMAL | 5,2 | - | - | - | 体重(kg) |
| height | DECIMAL | 5,2 | - | - | - | 身高(cm) |
| bmi | DECIMAL | 4,2 | - | - | - | BMI指数 |
| test_data | JSON | - | - | - | - | 检验数据 |
| exam_data | JSON | - | - | - | - | 检查数据 |
| recorder_id | BIGINT | - | - | INDEX | - | 记录人ID |
| recorder_name | VARCHAR | 50 | - | - | - | 记录人姓名 |
| device_id | BIGINT | - | - | - | - | 使用设备ID |
| remark | VARCHAR | 500 | - | - | - | 备注 |
| create_time | DATETIME | - | ✓ | INDEX | NOW() | 创建时间 |

---

### 4.2 健康预警表 (`t_health_warning`)

**表说明:** 健康异常预警记录与处理流程

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 预警ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| elderly_name | VARCHAR | 50 | - | - | - | 老人姓名(冗余字段) |
| warning_type | VARCHAR | 50 | - | INDEX | - | 预警类型 |
| warning_level | INT | - | ✓ | INDEX | 1 | 预警级别: 1-低风险, 2-中风险, 3-高风险, 4-紧急 |
| title | VARCHAR | 200 | - | - | - | 预警标题 |
| content | TEXT | - | - | - | - | 预警详情 |
| trigger_data | JSON | - | - | - | - | 触发数据(指标值、正常范围等JSON) |
| data_source | VARCHAR | 50 | - | INDEX | - | 数据来源: device-设备, manual-人工, system-系统 |
| trigger_time | DATETIME | - | ✓ | INDEX | - | 预警触发时间 |
| status | INT | - | ✓ | INDEX | 0 | 状态: 0-待处理, 1-已分配, 2-处理中, 3-已完成 |
| assigned_doctor_id | BIGINT | - | - | INDEX | - | 分配处理医生ID |
| assigned_time | DATETIME | - | - | - | - | 分配时间 |
| handle_deadline | DATETIME | - | - | INDEX | - | 处理时限 |
| handler_id | BIGINT | - | - | INDEX | - | 实际处理人ID |
| handler_name | VARCHAR | 50 | - | - | - | 处理人姓名 |
| handle_time | DATETIME | - | - | - | - | 实际处理时间 |
| handle_result | TEXT | - | - | - | - | 处理结果 |
| handle_evaluation | VARCHAR | 500 | - | - | - | 处理评价 |
| handle_remark | VARCHAR | 500 | - | - | - | 处理备注 |
| is_notified_family | TINYINT | - | - | - | 0 | 是否已通知家属: 0-否, 1-是 |
| is_notified_doctor | TINYINT | - | - | - | 0 | 是否已通知医生: 0-否, 1-是 |
| remark | VARCHAR | 500 | - | - | - | 备注信息 |
| created_time | DATETIME | - | ✓ | INDEX | NOW() | 创建时间 |
| updated_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| create_by | BIGINT | - | - | - | - | 创建人ID |
| update_by | BIGINT | - | - | - | - | 更新人ID |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记: 0-未删除, 1-已删除 |

**预警类型枚举值:**
- `vital_signs` - 生命体征异常
- `chronic_disease` - 慢性病指标异常
- `medication` - 用药异常
- `behavior` - 行为异常
- `fall_risk` - 跌倒风险
- `other` - 其他

**预警级别:**
- `1` - 低风险(绿色)
- `2` - 中风险(黄色)
- `3` - 高风险(橙色)
- `4` - 紧急(红色)

**状态流转:**
- `0` - 待处理(pending)
- `1` - 已分配(assigned)
- `2` - 处理中(processing)
- `3` - 已完成(completed)

---

### 4.3 评估报告表 (`assessment_report`)

**表说明:** 老人健康评估报告

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 报告ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| assessment_type | VARCHAR | 50 | - | INDEX | - | 评估类型 |
| assessment_date | DATE | - | ✓ | INDEX | - | 评估日期 |
| assessor_id | BIGINT | - | ✓ | INDEX | - | 评估人ID |
| assessor_name | VARCHAR | 50 | - | - | - | 评估人姓名 |
| assessment_items | JSON | - | - | - | - | 评估项目 |
| total_score | INT | - | - | - | - | 总分 |
| risk_level | VARCHAR | 20 | - | INDEX | - | 风险等级 |
| conclusion | TEXT | - | - | - | - | 评估结论 |
| suggestions | TEXT | - | - | - | - | 建议措施 |
| next_assessment_date | DATE | - | - | - | - | 下次评估日期 |
| attachment_urls | JSON | - | - | - | - | 附件URL列表 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |

**评估类型:**
- `health_assessment` - 健康评估
- `ability_assessment` - 能力评估
- `mental_assessment` - 精神状态评估
- `nutrition_assessment` - 营养评估

---

### 4.4 照护能力评估表 (`elderly_care_assessment`)

**表说明:** 老人照护需求和能力评估记录

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 评估ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| assessment_date | DATE | - | ✓ | INDEX | - | 评估日期 |
| assessment_type | VARCHAR | 20 | ✓ | INDEX | - | 评估类型 |
| total_score | INT | - | ✓ | - | - | 总分 |
| risk_level | VARCHAR | 10 | ✓ | INDEX | - | 风险等级 |
| assessment_result | TEXT | - | - | - | - | 评估结果详情 |
| suggestions | TEXT | - | - | - | - | 建议措施 |
| assessor_name | VARCHAR | 50 | - | - | - | 评估人姓名 |
| create_time | DATETIME | - | - | - | NOW() | 创建时间 |
| update_time | DATETIME | - | - | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记: 0-未删除, 1-已删除 |

**评估类型枚举值:**
- `health` - 健康评估
- `ability` - 能力评估
- `mental` - 精神评估
- `nutrition` - 营养评估

**风险等级:**
- `low` - 低风险
- `medium` - 中风险
- `high` - 高风险

---

## 5. 护理与服务

### 5.1 护理记录表 (`nursing_record`)

**表说明:** 日常护理工作记录

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 记录ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| nurse_id | BIGINT | - | ✓ | INDEX | - | 护工ID |
| record_date | DATE | - | ✓ | INDEX | - | 记录日期 |
| record_time | TIME | - | ✓ | - | - | 记录时间 |
| care_type | VARCHAR | 50 | - | INDEX | - | 护理类型 |
| care_content | TEXT | - | - | - | - | 护理内容 |
| elderly_status | VARCHAR | 200 | - | - | - | 老人状态 |
| abnormal_situation | VARCHAR | 500 | - | - | - | 异常情况 |
| images | JSON | - | - | - | - | 护理照片 |
| duration_minutes | INT | - | - | - | - | 护理时长(分钟) |
| create_time | DATETIME | - | ✓ | INDEX | NOW() | 创建时间 |

**护理类型:**
- `morning_care` - 晨间护理
- `evening_care` - 晚间护理
- `feeding` - 喂食
- `bathing` - 洗浴
- `turning` - 翻身
- `toileting` - 如厕协助
- `medication` - 用药协助
- `exercise` - 活动协助

---

### 5.2 用药记录表 (`medication_record`)

**表说明:** 老人用药管理记录

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 记录ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| doctor_id | BIGINT | - | - | INDEX | - | 开具医生ID |
| medication_name | VARCHAR | 100 | ✓ | INDEX | - | 药品名称 |
| medication_type | VARCHAR | 50 | - | - | - | 药品类型 |
| dosage | VARCHAR | 50 | - | - | - | 剂量 |
| frequency | VARCHAR | 50 | - | - | - | 服用频率 |
| start_date | DATE | ✓ | INDEX | - | - | 开始日期 |
| end_date | DATE | - | INDEX | - | - | 结束日期 |
| administration_route | VARCHAR | 50 | - | - | - | 给药途径 |
| purpose | VARCHAR | 200 | - | - | - | 用药目的 |
| side_effects | VARCHAR | 500 | - | - | - | 可能副作用 |
| precautions | VARCHAR | 500 | - | - | - | 注意事项 |
| actual_records | JSON | - | - | - | - | 实际服药记录 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-已停用, 1-使用中 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |

**实际服药记录JSON格式:**
```json
[
  {
    "date": "2024-10-28",
    "time": "08:00",
    "operator_id": 5,
    "operator_name": "王护工",
    "status": "completed",
    "remark": "按时服用"
  }
]
```

---

### 5.3 巡诊记录表 (`visit_record`)

**表说明:** 医生巡诊工作记录

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 记录ID |
| elderly_id | BIGINT | - | ✓ | INDEX | - | 老人ID |
| doctor_id | BIGINT | - | ✓ | INDEX | - | 医生ID |
| visit_date | DATE | - | ✓ | INDEX | - | 巡诊日期 |
| visit_time | TIME | - | ✓ | - | - | 巡诊时间 |
| chief_complaint | VARCHAR | 500 | - | - | - | 主诉 |
| symptoms | TEXT | - | - | - | - | 症状描述 |
| physical_exam | TEXT | - | - | - | - | 体格检查 |
| diagnosis | VARCHAR | 500 | - | - | - | 诊断 |
| treatment_plan | TEXT | - | - | - | - | 治疗方案 |
| prescription | JSON | - | - | - | - | 处方 |
| next_visit_date | DATE | - | - | INDEX | - | 下次巡诊日期 |
| remarks | TEXT | - | - | - | - | 备注 |
| create_time | DATETIME | - | ✓ | INDEX | NOW() | 创建时间 |

---

## 6. 设备管理

### 6.1 设备信息表 (`equipment`)

**表说明:** 医疗设备台账管理

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 设备ID |
| organization_id | BIGINT | - | - | INDEX | - | 所属机构ID |
| device_code | VARCHAR | 50 | ✓ | UNIQUE | - | 设备编号 |
| device_name | VARCHAR | 100 | ✓ | - | - | 设备名称 |
| device_type | VARCHAR | 50 | - | INDEX | - | 设备类型 |
| device_model | VARCHAR | 100 | - | - | - | 设备型号 |
| manufacturer | VARCHAR | 100 | - | - | - | 生产厂家 |
| purchase_date | DATE | - | - | - | - | 购置日期 |
| warranty_period | INT | - | - | - | - | 保修期(月) |
| location | VARCHAR | 100 | - | INDEX | - | 存放位置 |
| responsible_person | VARCHAR | 50 | - | - | - | 责任人 |
| status | VARCHAR | 20 | - | INDEX | - | 状态 |
| last_maintenance_date | DATE | - | - | - | - | 上次维护日期 |
| next_maintenance_date | DATE | - | - | INDEX | - | 下次维护日期 |
| elderly_id | BIGINT | - | - | INDEX | - | 绑定老人ID(个人设备) |
| remark | VARCHAR | 500 | - | - | - | 备注 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |
| is_deleted | TINYINT | - | - | - | 0 | 删除标记 |

**设备状态:**
- `normal` - 正常
- `in_use` - 使用中
- `maintenance` - 维护中
- `malfunction` - 故障
- `scrapped` - 报废

---

### 6.2 设备使用记录表 (`equipment_usage_record`)

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 记录ID |
| equipment_id | BIGINT | - | ✓ | INDEX | - | 设备ID |
| elderly_id | BIGINT | - | - | INDEX | - | 使用老人ID |
| operator_id | BIGINT | - | ✓ | INDEX | - | 操作人ID |
| operator_name | VARCHAR | 50 | - | - | - | 操作人姓名 |
| usage_date | DATE | - | ✓ | INDEX | - | 使用日期 |
| usage_time | TIME | - | - | - | - | 使用时间 |
| measurement_data | JSON | - | - | - | - | 测量数据 |
| abnormal_situation | VARCHAR | 500 | - | - | - | 异常情况 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |

---

## 7. 系统日志

### 7.1 操作审计日志表 (`operation_log`)

**表说明:** 系统操作审计跟踪

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 日志ID |
| user_id | BIGINT | - | ✓ | INDEX | - | 操作用户ID |
| user_role | VARCHAR | 20 | - | INDEX | - | 用户角色 |
| username | VARCHAR | 50 | - | - | - | 用户名 |
| operation_type | VARCHAR | 50 | - | INDEX | - | 操作类型 |
| operation_module | VARCHAR | 50 | - | INDEX | - | 操作模块 |
| target_type | VARCHAR | 50 | - | INDEX | - | 目标类型 |
| target_id | BIGINT | - | - | INDEX | - | 目标ID |
| operation_detail | TEXT | - | - | - | - | 操作详情 |
| ip_address | VARCHAR | 50 | - | - | - | IP地址 |
| user_agent | VARCHAR | 500 | - | - | - | 用户代理 |
| operation_time | DATETIME | - | ✓ | INDEX | NOW() | 操作时间 |
| execution_time | INT | - | - | - | - | 执行时长(ms) |
| status | TINYINT | - | - | INDEX | - | 状态: 0-失败, 1-成功 |
| error_message | TEXT | - | - | - | - | 错误信息 |

**操作类型:**
- `view` - 查看
- `add` - 新增
- `edit` - 编辑
- `delete` - 删除
- `export` - 导出
- `import` - 导入
- `login` - 登录
- `logout` - 登出

---

### 7.2 机构信息表 (`organization_info`)

| 字段名 | 类型 | 长度 | 必填 | 索引 | 默认值 | 说明 |
|--------|------|------|------|------|--------|------|
| id | BIGINT | - | ✓ | PRIMARY | AUTO | 机构ID |
| org_code | VARCHAR | 50 | ✓ | UNIQUE | - | 机构编码 |
| org_name | VARCHAR | 100 | ✓ | - | - | 机构名称 |
| org_type | VARCHAR | 20 | - | INDEX | - | 机构类型 |
| parent_org_id | BIGINT | - | - | INDEX | - | 上级机构ID |
| contact_person | VARCHAR | 50 | - | - | - | 联系人 |
| contact_phone | VARCHAR | 20 | - | - | - | 联系电话 |
| address | VARCHAR | 200 | - | - | - | 地址 |
| capacity | INT | - | - | - | - | 床位数/容量 |
| status | TINYINT | - | - | INDEX | 1 | 状态: 0-停用, 1-启用 |
| create_time | DATETIME | - | ✓ | - | NOW() | 创建时间 |
| update_time | DATETIME | - | ✓ | - | NOW() | 更新时间 |

**机构类型:**
- `hospital` - 医院
- `nursing_home` - 养老院
- `community` - 社区服务中心

---

## 附录: 数据统计

### 数据表总览

| 分类 | 表数量 | 表名列表 |
|------|--------|----------|
| 用户权限 | 5 | sys_user, sys_role, sys_permission, sys_role_permission, family_user |
| 老人档案 | 2 | elderly, family_elderly_relation |
| 医护人员 | 6 | t_doctor, doctor_elderly_relation, nurse_info, nurse_elderly_relation, social_worker_info |
| 健康管理 | 4 | health_record, t_health_warning, assessment_report, elderly_care_assessment |
| 护理服务 | 3 | nursing_record, medication_record, visit_record |
| 设备管理 | 0 | *(待开发)* |
| 系统管理 | 2 | audit_log, organization_info |
| **实际存在** | **16** | - |
| **文档规划** | **22** | *(包含待开发表)* |

**说明:**
- ✅ 16个表已在数据库中创建并投入使用
- ⏳ 设备管理模块(equipment, equipment_usage_record)规划中,暂未实现
- ⏳ 部分关联表(family_elderly_relation, visit_record等)规划中
- `audit_log` 原名 `operation_log`,已统一更名
- `t_health_warning` 原名 `health_warning`,加 `t_` 前缀以区分业务表
- `family_user` 为家属基础信息表,关联 `sys_user`
- `elderly_care_assessment` 为照护能力评估表

---

**文档版本:** v2.1  
**更新日期:** 2025年10月29日  
**维护人:** 开发团队  
**变更说明:** 
- ✅ 已与实际数据库结构完全同步(16/16表验证通过)
- ✅ 修正 `sys_user` 表结构(10字段)
- ✅ 更新 `t_health_warning` 表(27字段)
- ✅ 修正 `family_user` 表定义(12字段,实际结构)
- ✅ 修正 `elderly_care_assessment` 表定义(12字段,实际结构)
- ✅ 统一表名: `operation_log` → `audit_log`
- ✅ 标注设备管理表为待开发状态
- ✅ 完成16个实际表的字段级验证

