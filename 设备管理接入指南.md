# 🏥 智慧医养平台 - 设备管理接入指南

## 📋 项目概述

智慧医养平台设备管理模块为医疗养老机构提供统一的设备接入、管理和监控平台。支持多种医疗设备的数据采集、状态监控、预警提醒等功能。

## 🔧 技术架构

### 后端技术栈
- **框架**: Spring Boot 2.7.18
- **数据库**: MySQL 8.0 + MyBatis-Plus
- **缓存**: Redis
- **文档**: Swagger/OpenAPI 3.0
- **安全**: Spring Security + JWT

### 前端技术栈
- **框架**: Vue.js 3 + Composition API
- **UI组件**: Element Plus
- **构建工具**: Vite
- **状态管理**: Pinia

## 📊 支持的设备类型

### 生理监测设备
| 设备类型 | 代码 | 描述 | 数据采集频率 |
|---------|------|------|-------------|
| 智能血压计 | BLOOD_PRESSURE | 监测血压、心率 | 按需测量 |
| 血糖仪 | BLOOD_GLUCOSE | 监测血糖水平 | 按需测量 |
| 智能体温计 | THERMOMETER | 监测体温 | 按需测量 |
| 心电监护仪 | ECG_MONITOR | 监测心电图、生命体征 | 实时监测 |
| 智能体重秤 | WEIGHT_SCALE | 监测体重、BMI | 按需测量 |

### 可穿戴设备
| 设备类型 | 代码 | 描述 | 数据采集频率 |
|---------|------|------|-------------|
| 智能手环 | SMART_WATCH | 监测心率、步数、睡眠 | 1-60秒 |

### 安全监护设备
| 设备类型 | 代码 | 描述 | 数据采集频率 |
|---------|------|------|-------------|
| 定位器 | LOCATOR | GPS定位追踪 | 5-60分钟 |
| 紧急呼叫器 | EMERGENCY_BUTTON | 紧急求助 | 事件触发 |

### 环境监测设备
| 设备类型 | 代码 | 描述 | 数据采集频率 |
|---------|------|------|-------------|
| 环境监测器 | ENVIRONMENT_SENSOR | 温湿度、空气质量 | 10-60分钟 |

## 🔌 设备接入方式

### 通信协议支持
- **WiFi**: 适用于固定位置设备
- **蓝牙**: 适用于近距离设备
- **4G/5G**: 适用于移动设备
- **ZigBee**: 适用于低功耗设备
- **LoRa**: 适用于长距离低功耗设备

### 数据传输格式
所有设备数据均采用JSON格式，通过REST API进行传输。

## 📁 数据库设计

### 设备表结构 (equipment)
```sql
CREATE TABLE equipment (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '设备ID',
    device_id VARCHAR(50) NOT NULL UNIQUE COMMENT '设备编号',
    device_name VARCHAR(100) NOT NULL COMMENT '设备名称',
    device_type VARCHAR(50) NOT NULL COMMENT '设备类型',
    brand VARCHAR(50) COMMENT '设备品牌',
    model VARCHAR(100) COMMENT '设备型号',
    manufacturer VARCHAR(100) COMMENT '制造商',
    status VARCHAR(20) DEFAULT 'OFFLINE' COMMENT '设备状态',
    location VARCHAR(200) COMMENT '设备位置',
    elderly_id BIGINT COMMENT '绑定老人ID',
    serial_number VARCHAR(100) COMMENT '设备序列号',
    mac_address VARCHAR(50) COMMENT 'MAC地址',
    ip_address VARCHAR(50) COMMENT 'IP地址',
    protocol VARCHAR(20) COMMENT '通信协议',
    api_endpoint VARCHAR(500) COMMENT 'API接入地址',
    data_frequency INT DEFAULT 60 COMMENT '数据推送频率（秒）',
    battery_level INT COMMENT '电池电量百分比',
    firmware_version VARCHAR(50) COMMENT '固件版本',
    last_online_time DATETIME COMMENT '最后在线时间',
    last_data_time DATETIME COMMENT '最后数据上报时间',
    install_date DATETIME COMMENT '安装日期',
    warranty_expiry DATETIME COMMENT '保修到期日期',
    description TEXT COMMENT '设备描述',
    config_params JSON COMMENT '配置参数',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    is_deleted TINYINT(1) DEFAULT 0 COMMENT '是否删除'
);
```

## 🚀 API接口文档

### 基础URL
```
http://localhost:8080/api/equipment
```

### 1. 设备列表查询
```http
GET /list
```

**请求参数：**
| 参数 | 类型 | 必填 | 描述 |
|------|------|------|------|
| current | int | 否 | 当前页，默认1 |
| size | int | 否 | 每页大小，默认10 |
| deviceType | string | 否 | 设备类型过滤 |
| status | string | 否 | 设备状态过滤 |
| keyword | string | 否 | 关键词搜索 |

**响应示例：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "records": [
      {
        "id": 1,
        "deviceId": "BP001",
        "deviceName": "智能血压计-001",
        "deviceType": "BLOOD_PRESSURE",
        "brand": "欧姆龙",
        "model": "HEM-7136",
        "status": "ONLINE",
        "location": "A栋101室",
        "batteryLevel": 85,
        "lastOnlineTime": "2025-07-08T12:00:00"
      }
    ],
    "total": 100,
    "current": 1,
    "size": 10
  }
}
```

### 2. 设备详情查询
```http
GET /{id}
```

**请求参数：**
| 参数 | 类型 | 必填 | 描述 |
|------|------|------|------|
| id | long | 是 | 设备ID |

### 3. 创建设备
```http
POST /
```

**请求体：**
```json
{
  "deviceId": "BP001",
  "deviceName": "智能血压计-001",
  "deviceType": "BLOOD_PRESSURE",
  "brand": "欧姆龙",
  "model": "HEM-7136",
  "manufacturer": "欧姆龙健康医疗(中国)有限公司",
  "status": "ONLINE",
  "location": "A栋101室",
  "protocol": "WIFI",
  "description": "用于监测老人血压的智能设备"
}
```

### 4. 更新设备
```http
PUT /{id}
```

### 5. 删除设备
```http
DELETE /{id}
```

### 6. 设备统计
```http
GET /statistics
```

**响应示例：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "totalCount": 100,
    "onlineCount": 85,
    "offlineCount": 12,
    "faultCount": 3,
    "onlineRate": 85.0
  }
}
```

### 7. 设备类型统计
```http
GET /type-statistics
```

### 8. 设备接入参数
```http
GET /integration-params/{deviceType}
```

**响应示例：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "deviceType": "BLOOD_PRESSURE",
    "deviceName": "智能血压计",
    "apiEndpoint": "/api/devices/blood-pressure/data",
    "dataFormat": {
      "systolic": "number",
      "diastolic": "number",
      "heartRate": "number",
      "timestamp": "datetime"
    },
    "sampleData": {
      "systolic": 120,
      "diastolic": 80,
      "heartRate": 72,
      "timestamp": "2025-07-08T12:00:00"
    }
  }
}
```

## 💻 前端页面结构

### 页面路由
- `/equipment/list` - 设备管理列表页
- `/equipment/detail/:id` - 设备详情页
- `/equipment/integration` - 设备接入指南页

### 核心组件
- `list.vue` - 设备列表页面
- `EquipmentDetail.vue` - 设备详情组件
- `EquipmentForm.vue` - 设备表单组件
- `DeviceIntegrationGuide.vue` - 设备接入指南组件
- `DeviceIntegrationDetail.vue` - 设备接入详情组件

## 🔧 开发配置

### 后端配置
```yaml
# application.yml
server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/smartcare_cloud
    username: root
    password: 123456
```

### 前端配置
```javascript
// vite.config.js
export default {
  server: {
    port: 3001,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
}
```

## 📱 设备接入示例

### 血压计数据上报
```javascript
// 设备端代码示例
const deviceData = {
  deviceId: "BP001",
  systolic: 120,
  diastolic: 80,
  heartRate: 72,
  timestamp: new Date().toISOString()
};

fetch('/api/devices/blood-pressure/data', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer ' + token
  },
  body: JSON.stringify(deviceData)
});
```

### 智能手环数据上报
```javascript
const wearableData = {
  deviceId: "SW001",
  heartRate: 72,
  steps: 8500,
  distance: 5.2,
  calories: 280,
  sleepDuration: 7.5,
  timestamp: new Date().toISOString()
};

fetch('/api/devices/smart-watch/data', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer ' + token
  },
  body: JSON.stringify(wearableData)
});
```

## 🔐 安全认证

### API认证
所有API请求需要在Header中包含JWT token：
```http
Authorization: Bearer <your-jwt-token>
```

### 权限控制
- 管理员：完整的设备管理权限
- 医生：查看和操作权限
- 护理人员：基础查看权限

## 📞 技术支持

### 开发团队
- 后端开发：Spring Boot + MyBatis-Plus
- 前端开发：Vue.js 3 + Element Plus
- 数据库：MySQL 8.0 + Redis

### 联系方式
- 技术文档：http://localhost:8080/swagger-ui/
- 前端页面：http://localhost:3001
- 设备管理：http://localhost:3001/equipment/list

---

## 📋 部署清单

### 后端部署
1. 启动MySQL数据库
2. 执行设备表结构SQL
3. 启动Redis服务
4. 运行Spring Boot应用

### 前端部署
1. 安装Node.js依赖
2. 配置API代理
3. 启动Vue.js开发服务器

### 数据库初始化
```sql
-- 1. 创建设备表
source equipment_table.sql

-- 2. 插入示例数据
-- 已包含在SQL文件中
```

---

*智慧医养平台设备管理模块 - 让设备接入变得简单高效！*
