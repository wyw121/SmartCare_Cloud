<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶å±ä¸ªäººä¸­å¿ƒå¿«é€Ÿæµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        .btn {
            background: #409EFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
        }
        .btn:hover {
            background: #337ecc;
        }
        .btn.success {
            background: #67C23A;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 14px;
        }
        .status.success {
            background: #f0f9ff;
            border: 1px solid #b3d8ff;
            color: #0369a1;
        }
        .status.warning {
            background: #fffbeb;
            border: 1px solid #fed7aa;
            color: #ea580c;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ¥ å®¶å±ä¸ªäººä¸­å¿ƒå¿«é€Ÿæµ‹è¯•</h1>
        <p>è¿™ä¸ªé¡µé¢å¯ä»¥å¿«é€Ÿè®¾ç½®å®¶å±èº«ä»½å¹¶æµ‹è¯•ä¸ªäººä¸­å¿ƒåŠŸèƒ½</p>
    </div>

    <div class="card">
        <h2>ğŸš€ ä¸€é”®æµ‹è¯•</h2>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è‡ªåŠ¨è®¾ç½®å®¶å±èº«ä»½å¹¶æ‰“å¼€ä¸ªäººä¸­å¿ƒï¼š</p>
        <button class="btn success" onclick="quickTest()">è®¾ç½®å®¶å±èº«ä»½ & æ‰“å¼€ä¸ªäººä¸­å¿ƒ</button>
        
        <div id="status" style="display: none;"></div>
    </div>

    <div class="card">
        <h2>ğŸ“‹ æµ‹è¯•æ­¥éª¤è¯´æ˜</h2>
        <ol>
            <li>ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®è®¾ç½®å®¶å±èº«ä»½</li>
            <li>ç³»ç»Ÿä¼šè‡ªåŠ¨æ‰“å¼€ä¸ªäººä¸­å¿ƒé¡µé¢</li>
            <li>æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤ºå®¶å±ä¿¡æ¯</li>
            <li>æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºäº†å®¶å±ç‰¹æœ‰çš„å­—æ®µï¼ˆå¦‚"ä¸é•¿è¾ˆå…³ç³»"ï¼‰</li>
            <li>æ£€æŸ¥ç»Ÿè®¡æ•°æ®æ˜¯å¦é€‚åˆå®¶å±è§’è‰²</li>
        </ol>
    </div>

    <div class="card">
        <h2>ğŸ”§ æ‰‹åŠ¨è°ƒè¯•</h2>
        <p>å¦‚æœé¡µé¢æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š</p>
        <ol>
            <li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰</li>
            <li>è¿è¡Œ <code>switchToFamily()</code> å‘½ä»¤</li>
            <li>æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯</li>
            <li>è¿è¡Œ <code>checkUserState()</code> æŸ¥çœ‹å½“å‰çŠ¶æ€</li>
        </ol>
        
        <button class="btn" onclick="openConsole()">æŸ¥çœ‹æ§åˆ¶å°è°ƒè¯•å‘½ä»¤</button>
    </div>

    <script>
        function quickTest() {
            console.log('ğŸ¥ å¼€å§‹å®¶å±ä¸ªäººä¸­å¿ƒæµ‹è¯•...')
            
            // è®¾ç½®å®¶å±ç”¨æˆ·æ•°æ®
            const familyData = {
                id: 3,
                username: 'family',
                password: '123456',
                name: 'æå®¶å±',
                role: 'family',
                roleText: 'å®¶å±',
                permissions: [
                    'dashboard:view',
                    'elderly:view',
                    'health:view',
                    'health-warning:view',
                    'report:view'
                ],
                avatar: '',
                relationship: 'å„¿å­',
                elderlyIds: [1, 2],
                phone: '13800138002',
                email: 'family@smartcare.com',
                description: 'å®¶å±ç”¨æˆ·ï¼Œå¯æŸ¥çœ‹å…³è”è€äººçš„å¥åº·ä¿¡æ¯å’Œé¢„è­¦',
                features: {
                    elderly: ['view'],
                    health: ['view'],
                    report: ['view']
                }
            }
            
            const token = `dev_switch_token_family_${Date.now()}`
            
            try {
                // è®¾ç½®ç”¨æˆ·æ•°æ®
                localStorage.setItem('token', token)
                localStorage.setItem('userInfo', JSON.stringify(familyData))
                
                console.log('âœ… å®¶å±æ•°æ®è®¾ç½®æˆåŠŸ:', familyData)
                
                showStatus('å·²è®¾ç½®å®¶å±èº«ä»½ï¼Œæ­£åœ¨æ‰“å¼€ä¸ªäººä¸­å¿ƒ...', 'success')
                
                // å»¶è¿Ÿæ‰“å¼€é¡µé¢ï¼Œç¡®ä¿æ•°æ®å·²ä¿å­˜
                setTimeout(() => {
                    window.open('/profile/index', '_blank')
                }, 500)
                
            } catch (error) {
                console.error('âŒ è®¾ç½®å¤±è´¥:', error)
                showStatus('è®¾ç½®å¤±è´¥: ' + error.message, 'warning')
            }
        }
        
        function showStatus(message, type) {
            const statusEl = document.getElementById('status')
            statusEl.textContent = message
            statusEl.className = `status ${type}`
            statusEl.style.display = 'block'
            
            if (type === 'success') {
                setTimeout(() => {
                    statusEl.style.display = 'none'
                }, 3000)
            }
        }
        
        function openConsole() {
            console.log('=== å®¶å±ä¸ªäººä¸­å¿ƒè°ƒè¯•å‘½ä»¤ ===')
            console.log('1. switchToFamily() - åˆ‡æ¢åˆ°å®¶å±è§’è‰²')
            console.log('2. checkUserState() - æ£€æŸ¥å½“å‰ç”¨æˆ·çŠ¶æ€')
            console.log('3. clearUserState() - æ¸…é™¤ç”¨æˆ·çŠ¶æ€')
            console.log('===============================')
            
            showStatus('è°ƒè¯•å‘½ä»¤å·²è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œè¯·æŒ‰F12æŸ¥çœ‹', 'success')
        }
        
        // å®šä¹‰å…¨å±€è°ƒè¯•å‡½æ•°
        window.switchToFamily = function() {
            quickTest()
        }
        
        window.checkUserState = function() {
            console.log('=== å½“å‰ç”¨æˆ·çŠ¶æ€ ===')
            console.log('Token:', localStorage.getItem('token'))
            const userInfo = localStorage.getItem('userInfo')
            if (userInfo) {
                console.log('UserInfo:', JSON.parse(userInfo))
            } else {
                console.log('UserInfo: æ— ')
            }
            console.log('==================')
        }
        
        window.clearUserState = function() {
            localStorage.removeItem('token')
            localStorage.removeItem('userInfo')
            console.log('âœ… ç”¨æˆ·çŠ¶æ€å·²æ¸…é™¤')
            location.reload()
        }
    </script>
</body>
</html>
